(function(e){function t(t){for(var r,c,i=t[0],u=t[1],l=t[2],b=0,d=[];b<i.length;b++)c=i[b],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&d.push(o[c][0]),o[c]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);s&&s(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==o[u]&&(r=!1)}r&&(a.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},o={app:0},a=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var s=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},2811:function(e,t,n){},5385:function(e,t,n){"use strict";n("7397")},7068:function(e,t,n){"use strict";n("2811")},7397:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o=n("6c02"),a=n("9ab4"),c=n("5502"),i=n("bc3a"),u=n.n(i),l=u.a.create({baseURL:"http://apis.imooc.com/api/"});l.interceptors.request.use((function(e){console.log("request config",e);var t="5CD4944B827AC23C";return"get"===e.method?e.params=Object(a["a"])(Object(a["a"])({},e.params),{icode:t}):e.data=Object(a["a"])(Object(a["a"])({},e.data),{icode:t}),e}));var s=l,b=Object(c["a"])({state:function(){return{user:{isLogin:!1,name:"",id:""},token:localStorage.getItem("token")||""}},getters:{},mutations:{login:function(e,t){console.log("mutations,,,,,,,login,,,,,,");var n=t.data.token;e.token=n,localStorage.setItem("token",n),s.defaults.headers.common.Authorization="Bearer "+n},fetchCurrentUser:function(e,t){console.log("mutations,,,,,,,fetchCurrentUser,,,,,,"),e.user={isLogin:!0,name:t.data.nickName,id:t.data._id},console.log("fetchCurrentUser mutations  payload",t)},logout:function(e){e.token="",localStorage.removeItem("token"),s.defaults.headers.common.Authorization=""}},actions:{login:function(e,t){return console.log("actions,,,,,,,login,,,,,,"),s.post("/user/login",t).then((function(t){0===t.data.code&&(console.log("登录成功",t),e.commit("login",t.data))})).catch((function(e){console.log("登录失败",e)}))},fetchCurrentUser:function(e){return console.log("actions,,,,,,,fetchCurrentUser,,,,,,"),s.get("/user/current").then((function(t){0===t.data.code&&(console.log("获取用户信息成功",t),e.commit("fetchCurrentUser",t.data))})).catch((function(e){console.log("获取用户信息失败",e)}))},loginAndFetchCurrentUser:function(e,t){return Object(a["b"])(this,void 0,void 0,(function(){return Object(a["c"])(this,(function(n){return e.dispatch("login",t).then((function(){e.dispatch("fetchCurrentUser")})),[2]}))}))}}}),d=b;function f(e,t,n,o,a,c){var i=Object(r["z"])("column-list");return Object(r["t"])(),Object(r["d"])(i,{list:e.list},null,8,["list"])}var m={class:"row"},p={class:"card h-100 shadow-sm"},O={class:"card-body text-center"},j=["src","alt"],v={class:"card-title"},g={class:"card-text text-left"},h=Object(r["g"])("a",{href:"#",class:"btn btn-outline-primary"},"进入专栏",-1);function y(e,t,n,o,a,c){return Object(r["t"])(),Object(r["f"])("div",m,[(Object(r["t"])(!0),Object(r["f"])(r["a"],null,Object(r["x"])(e.columnList,(function(e){return Object(r["t"])(),Object(r["f"])("div",{class:"col-4 mb-4",key:e.id},[Object(r["g"])("div",p,[Object(r["g"])("div",O,[Object(r["g"])("img",{src:e.avatar,alt:e.title,class:"rounded-circle border border-light w-25 my-3"},null,8,j),Object(r["g"])("h5",v,Object(r["B"])(e.title),1),Object(r["g"])("p",g,Object(r["B"])(e.description),1),h])])])})),128))])}var w=Object(r["i"])({name:"ColumnList",props:{list:{type:Array,required:!0}},setup:function(e){console.log("columnlist setup!!!!");var t=Object(r["b"])((function(){return console.log("columnlist computed!!!!"),e.list.map((function(e){return e.avatar||(e.avatar=n("cf05")),e}))}));return{columnList:t}}}),k=n("6b0d"),_=n.n(k);const x=_()(w,[["render",y]]);var C=x,z=[{id:"1",title:"test1的专栏",description:"这是的test1专栏，有一段非常有意思的简介，可以更新一下欧",avatar:"http://vue-maker.oss-cn-hangzhou.aliyuncs.com/vue-marker/5ee22dd58b3c4520912b9470.jpg?x-oss-process=image/resize,m_pad,h_100,w_100"},{id:"2",title:"test2的专栏",description:"这是的test2专栏，有一段非常有意思的简介，可以更新一下欧",avatar:"http://vue-maker.oss-cn-hangzhou.aliyuncs.com/vue-marker/5ee22dd58b3c4520912b9470.jpg?x-oss-process=image/resize,m_pad,h_100,w_100"},{id:"3",title:"test3的专栏",description:"这是的test1专栏，有一段非常有意思的简介，可以更新一下欧 这是的test1专栏，有一段非常有意思的简介，可以更新一下欧"},{id:"4",title:"test4的专栏",description:"这是的test2专栏，有一段非常有意思的简介，可以更新一下欧",avatar:"http://vue-maker.oss-cn-hangzhou.aliyuncs.com/vue-marker/5ee22dd58b3c4520912b9470.jpg?x-oss-process=image/resize,m_pad,h_100,w_100"}],I=Object(r["i"])({name:"Home",components:{ColumnList:C},setup:function(){var e=Object(r["w"])(z);return console.log("Home"),{list:e}}});const L=_()(I,[["render",f]]);var S=L,V={class:"mb-3"},U=Object(r["g"])("label",{for:"exampleInputEmail1",class:"form-label"},"Email address",-1),A={class:"mb-3"},F=Object(r["g"])("label",{for:"exampleInputPassword1",class:"form-label"},"Password",-1);function R(e,t,n,o,a,c){var i=Object(r["z"])("validate-input"),u=Object(r["z"])("validate-form");return Object(r["t"])(),Object(r["d"])(u,{onFormSubmit:e.onFormSubmit},{default:Object(r["G"])((function(){return[Object(r["g"])("div",V,[U,Object(r["h"])(i,{type:"input",modelValue:e.formdata.email,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.formdata.email=t}),placeholder:"请输入email",class:"x-input",rules:e.emailRules},null,8,["modelValue","rules"])]),Object(r["g"])("div",A,[F,Object(r["h"])(i,{type:"password",modelValue:e.formdata.password,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.formdata.password=t}),placeholder:"请输入password",class:"x-input",rules:e.passwordRules},null,8,["modelValue","rules"])])]})),_:1},8,["onFormSubmit"])}var B={class:"validate-input-container pb-3"},q={key:2,class:"invalid-feedback"};function P(e,t,n,o,a,c){return Object(r["t"])(),Object(r["f"])("div",B,[e.tag!==e.textarea?Object(r["H"])((Object(r["t"])(),Object(r["f"])("input",Object(r["m"])({key:0,class:"form-control","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.inputRef.value=t}),onBlur:t[1]||(t[1]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.validateInput&&e.validateInput.apply(e,t)})},e.$attrs),null,16)),[[r["D"],e.inputRef.value]]):Object(r["H"])((Object(r["t"])(),Object(r["f"])("textarea",Object(r["m"])({key:1,class:"form-control","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.inputRef.value=t}),onBlur:t[3]||(t[3]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.validateInput&&e.validateInput.apply(e,t)})},e.$attrs),"\r\n      ",16)),[[r["E"],e.inputRef.value]]),e.inputRef.err?(Object(r["t"])(),Object(r["f"])("div",q,Object(r["B"])(e.inputRef.message),1)):Object(r["e"])("",!0)])}var $={class:"validate-form-container"},H=Object(r["g"])("button",{type:"submit",class:"btn btn-primary"},"submit",-1);function D(e,t,n,o,a,c){return Object(r["t"])(),Object(r["f"])("form",$,[Object(r["y"])(e.$slots,"default"),Object(r["g"])("div",{class:"submit-area",onClick:t[0]||(t[0]=Object(r["I"])((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.submitForm&&e.submitForm.apply(e,t)}),["prevent"]))},[Object(r["y"])(e.$slots,"submit",{},(function(){return[H]}))])])}var E=n("1344"),G=Object(E["a"])(),M=Object(r["i"])({name:"ValidateForm",setup:function(e,t){console.log("2");var n=[],o=function(e){e&&n.push(e),console.log("funcArray,,,",n)};G.on("form-item-create",o),Object(r["s"])((function(){G.off("form-item-create",o),n=[]}));var a=function(){var e=n.map((function(e){return e()})).every((function(e){return e}));t.emit("form-submit",e)};return{submitForm:a}}});const T=_()(M,[["render",D]]);var Z=T,J=/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,N=Object(r["i"])({name:"ValidateInput",props:{modelValue:String,rules:Array,tag:{type:String,default:"input"}},inheritAttrs:!1,emits:["update:modelValue"],setup:function(e,t){var n=Object(r["v"])({value:Object(r["b"])({get:function(){return e.modelValue||""},set:function(e){t.emit("update:modelValue",e)}}),err:!1,message:""});Object(r["r"])((function(){console.log("validate input mitter"),G.emit("form-item-create",o)}));var o=function(){if(e.rules){var t=e.rules.every((function(e){var t=!0;switch(n.message=e.message,e.type){case"required":t=""!==n.value.trim();break;case"email":t=J.test(n.value);break;case"custom":t=!e.validator||e.validator();break;default:break}return t}));return n.err=!t,t}return!0};return{inputRef:n,validateInput:o}}});const K=_()(N,[["render",P]]);var Q=K,W=Object(r["i"])({name:"Login",components:{ValidateInput:Q,ValidateForm:Z},setup:function(){var e=Object(c["b"])(),t=Object(o["c"])();console.log("login");var n=Object(r["v"])({email:"",password:""}),a=[{type:"required",message:"不能为空"},{type:"email",message:"请输入符合规范的邮箱"}],i=function(r){e.dispatch("loginAndFetchCurrentUser",n).then((function(){t.push({name:"home"})})),console.log("app onFormSubmit result",r)};return{formdata:n,emailRules:a,onFormSubmit:i}}});const X=_()(W,[["render",R]]);var Y=X;function ee(e,t,n,o,a,c){return Object(r["t"])(),Object(r["f"])("div",null,"404")}var te=Object(r["i"])({name:"404",setup:function(){console.log("404")}});const ne=_()(te,[["render",ee]]);var re=ne;function oe(e,t,n,o,a,c){return Object(r["t"])(),Object(r["f"])("div",null,"create")}var ae=Object(r["i"])({name:"Create",setup:function(){console.log("Create")}});const ce=_()(ae,[["render",oe]]);var ie=ce,ue=Object(o["b"])(),le=[{path:"/",name:"home",component:S},{path:"/login",name:"login",component:Y,meta:{redirectToHome:!0}},{path:"/404",name:"NotFound",component:re},{path:"/create",name:"create",component:ie,meta:{requireLogin:!0}}],se=Object(o["a"])({history:ue,routes:le});se.beforeEach((function(e,t,n){console.log("router to,,,",e),console.log("router from,,,",t);var r=d.state,o=r.token,a=r.user,c=e.meta,i=c.redirectToHome,u=c.requireLogin;a.isLogin?i?n("/"):n():o?(s.defaults.headers.common.Authorization="Bearer "+o,d.dispatch("fetchCurrentUser").then((function(){n("/")})).catch((function(){n("login")}))):u?n("login"):n()}));var be=se,de={class:"container"};function fe(e,t,n,o,a,c){var i=Object(r["z"])("global-header"),u=Object(r["z"])("router-view");return Object(r["t"])(),Object(r["f"])("div",de,[Object(r["h"])(i,{user:e.user},null,8,["user"]),Object(r["h"])(u)])}n("ab8b");var me={class:"navbar navbar-dark bg-primary justify-content-between mb-4 px-4"},pe=Object(r["g"])("a",{class:"navbar-brand",href:"#"},"知乎者也专栏",-1),Oe={key:0,class:"list-inline mb-0"},je=Object(r["g"])("li",{class:"list-inline-item"},[Object(r["g"])("a",{href:"#",class:"btn btn-outline-light my-2"},"登陆")],-1),ve=Object(r["g"])("a",{href:"#",class:"btn btn-outline-light my-2"},"退出",-1),ge=[ve],he=Object(r["g"])("li",{class:"list-inline-item"},[Object(r["g"])("a",{href:"#",class:"btn btn-outline-light my-2"},"注册")],-1),ye={key:1,class:"list-inline mb-0"},we={class:"list-inline-item"},ke=Object(r["g"])("a",{href:"#",class:"dropdown-item"},"新建文章",-1),_e=Object(r["g"])("a",{href:"#",class:"dropdown-item"},"编辑资料",-1),xe=Object(r["g"])("a",{href:"#",class:"dropdown-item"},"退出登陆",-1);function Ce(e,t,n,o,a,c){var i=Object(r["z"])("dropdown-item"),u=Object(r["z"])("dropdown");return Object(r["t"])(),Object(r["f"])("nav",me,[pe,e.user.isLogin?(Object(r["t"])(),Object(r["f"])("ul",ye,[Object(r["g"])("li",we,[Object(r["h"])(u,{title:"你好 "+e.user.name},{default:Object(r["G"])((function(){return[Object(r["h"])(i,null,{default:Object(r["G"])((function(){return[ke]})),_:1}),Object(r["h"])(i,{disabled:""},{default:Object(r["G"])((function(){return[_e]})),_:1}),Object(r["h"])(i,null,{default:Object(r["G"])((function(){return[xe]})),_:1})]})),_:1},8,["title"])])])):(Object(r["t"])(),Object(r["f"])("ul",Oe,[je,Object(r["g"])("li",{class:"list-inline-item",onClick:t[0]||(t[0]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.logout&&e.logout.apply(e,t)})},ge),he]))])}var ze={class:"dropdown",ref:"dropdownRef"},Ie={key:0,class:"dropdown-menu",style:{display:"block"}};function Le(e,t,n,o,a,c){return Object(r["t"])(),Object(r["f"])("div",ze,[Object(r["g"])("a",{href:"#",class:"btn btn-outline-light my-2 dropdown-toggle",onClick:t[0]||(t[0]=Object(r["I"])((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.toggleOpen&&e.toggleOpen.apply(e,t)}),["prevent"]))},Object(r["B"])(e.title),1),e.isOpen?(Object(r["t"])(),Object(r["f"])("ul",Ie,[Object(r["y"])(e.$slots,"default")])):Object(r["e"])("",!0)],512)}var Se=function(e){var t=Object(r["w"])(!1),n=function(n){e.value&&e.value.contains(n.target)?t.value=!1:t.value=!0};return Object(r["r"])((function(){document.addEventListener("click",n)})),Object(r["s"])((function(){document.removeEventListener("click",n)})),t},Ve=Se,Ue=Object(r["i"])({name:"Dropdown",props:{title:{type:String,required:!0}},setup:function(){var e=Object(r["w"])(!1),t=Object(r["w"])(null),n=function(){e.value=!e.value},o=Ve(t);return Object(r["F"])(o,(function(){e.value&&o.value&&(e.value=!1)})),{isOpen:e,toggleOpen:n,dropdownRef:t}}});const Ae=_()(Ue,[["render",Le]]);var Fe=Ae;function Re(e,t,n,o,a,c){return Object(r["t"])(),Object(r["f"])("li",{class:Object(r["o"])(["dropdown-option",{"is-disabled":e.disabled}])},[Object(r["y"])(e.$slots,"default",{},void 0,!0)],2)}var Be=Object(r["i"])({name:"DropdownItem",props:{disabled:{type:Boolean,default:!1}}});n("7068");const qe=_()(Be,[["render",Re],["__scopeId","data-v-723f6723"]]);var Pe=qe,$e=Object(r["i"])({name:"ColumnList",components:{Dropdown:Fe,DropdownItem:Pe},props:{user:{type:Object,required:!0}},setup:function(){var e=Object(c["b"])(),t=function(){e.commit("logout")};return{logout:t}}});const He=_()($e,[["render",Ce]]);var De=He,Ee={isLogin:!1,name:"马红",id:"1"},Ge=Object(r["i"])({name:"App",components:{GlobalHeader:De},setup:function(){return{user:Ee}}});n("5385");const Me=_()(Ge,[["render",fe]]);var Te=Me,Ze=Object(r["c"])(Te);Ze.use(be),Ze.use(d),Ze.mount("#app")},cf05:function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.2d9e990f.js.map